funcDefined("sliceItemBlock")||(sliceItemBlock=function(){InitCustomScrollBar()}),funcDefined("sliceItemBlockSlide")||(sliceItemBlockSlide=function(options){InitCustomScrollBar()}),$(document).ready((function(){"SelectOfferProp"in window||"function"==typeof window.SelectOfferProp||(SelectOfferProp1=function(){var _this=$(this),obParams={},obSelect={},objUrl=parseUrlQuery(),add_url="",container=_this.closest(".bx_catalog_item_scu");obParams={PARAMS:_this.closest(".js_wrapper_items").data("params"),ID:container.data("offer_id"),SITE_ID:container.data("site_id"),LINK_ID:container.data("id")+"_block",IBLOCK_ID:container.data("offer_iblockid"),PROPERTY_ID:container.data("propertyid"),DEPTH:_this.closest(".item_wrapper").index(),VALUE:_this.data("onevalue"),CLASS:"inner_content",PICTURE:_this.closest(".catalog_item_wrapp").find(".thumb img").attr("src"),ARTICLE_NAME:_this.closest(".catalog_item_wrapp").find(".article_block").data("name"),ARTICLE_VALUE:_this.closest(".catalog_item_wrapp").find(".article_block").data("value")},"clear_cache"in objUrl&&"Y"==objUrl.clear_cache&&(add_url+="?clear_cache=Y");for(i=0;i<obParams.DEPTH+1;i++)strName="PROP_"+container.find(".item_wrapper:eq("+i+") > div").data("id"),obSelect[strName]=container.find(".item_wrapper:eq("+i+") li.item.active").data("onevalue"),obParams[strName]=container.find(".item_wrapper:eq("+i+") li.item.active").data("onevalue");if(_this.siblings().removeClass("active"),_this.addClass("active"),_this.attr("title")){var skuVal=_this.attr("title").split(":")[1];_this.closest(".item_wrapper").find(".show_class .val").text(skuVal)}else{var img_row=_this.find(" > i");if(img_row.length&&img_row.attr("title")){var skuVal=img_row.attr("title").split(":")[1];_this.closest(".item_wrapper").find(".show_class .val").text(skuVal)}}$.ajax({url:arMaxOptions.SITE_DIR+"ajax/js_item_detail.php"+add_url,type:"POST",data:obParams}).success((function(html){var ob=BX.processHTML(html);BX.ajax.processScripts(ob.SCRIPT)}))},$(document).on("click",".bx_catalog_item_scu li.item",SelectOfferProp))})),function(window){window.JCCatalogSectionOnlyElement||(window.JCCatalogSectionOnlyElement=function(arParams){"object"==typeof arParams&&(this.params=arParams,this.obProduct=null,this.set_quantity=1,this.currentPriceMode="",this.currentPrices=[],this.currentPriceSelected=0,this.currentQuantityRanges=[],this.currentQuantityRangeSelected=0,this.params.MESS&&(this.mess=this.params.MESS),this.init())},window.JCCatalogSectionOnlyElement.prototype={init:function(){var i=0,j=0,treeItems=null;this.obProduct=BX(this.params.ID),this.obProduct&&($(this.obProduct).find(".counter_wrapp .counter_block input").data("product","ob"+this.obProduct.id+"el"),this.currentPriceMode=this.params.ITEM_PRICE_MODE,this.currentPrices=this.params.ITEM_PRICES,this.currentQuantityRanges=this.params.ITEM_QUANTITY_RANGES)},setPriceAction:function(){this.set_quantity=this.params.MIN_QUANTITY_BUY,$(this.obProduct).find("input[name=quantity]").length&&(this.set_quantity=$(this.obProduct).find("input[name=quantity]").val()),this.checkPriceRange(this.set_quantity),$(this.obProduct).find(".not_matrix").hide(),$(this.obProduct).find(".with_matrix .price_value_block").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_PRICE)),$(this.obProduct).find(".with_matrix .discount")&&$(this.obProduct).find(".with_matrix .discount").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].BASE_PRICE,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_BASE_PRICE)),"Y"==this.params.SHOW_DISCOUNT_PERCENT_NUMBER&&(this.currentPrices[this.currentPriceSelected].PERCENT>0&&this.currentPrices[this.currentPriceSelected].PERCENT<100?($(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").length||$('<div class="value"></div>').insertBefore($(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .text")),$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").html("-<span>"+this.currentPrices[this.currentPriceSelected].PERCENT+"</span>%")):$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").length&&$(this.obProduct).find(".with_matrix .sale_block .sale_wrapper .value").remove()),$(this.obProduct).find(".with_matrix .sale_block .text .values_wrapper").html(getCurrentPrice(this.currentPrices[this.currentPriceSelected].DISCOUNT,this.currentPrices[this.currentPriceSelected].CURRENCY,this.currentPrices[this.currentPriceSelected].PRINT_DISCOUNT)),"NOT_SHOW"in this.params&&"Y"!=this.params.NOT_SHOW&&$(this.obProduct).find(".with_matrix").show(),"Y"==arMaxOptions.THEME.SHOW_TOTAL_SUMM&&void 0!==this.currentPrices[this.currentPriceSelected]&&setPriceItem($(this.obProduct),this.set_quantity,this.currentPrices[this.currentPriceSelected].PRICE)},checkPriceRange:function(quantity){if(void 0!==quantity&&"Q"==this.currentPriceMode){var range,found=!1;for(var i in this.currentQuantityRanges)if(this.currentQuantityRanges.hasOwnProperty(i)&&(range=this.currentQuantityRanges[i],parseInt(quantity)>=parseInt(range.SORT_FROM)&&("INF"==range.SORT_TO||parseInt(quantity)<=parseInt(range.SORT_TO)))){found=!0,this.currentQuantityRangeSelected=range.HASH;break}for(var k in!found&&(range=this.getMinPriceRange())&&(this.currentQuantityRangeSelected=range.HASH),this.currentPrices)if(this.currentPrices.hasOwnProperty(k)&&this.currentPrices[k].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=k;break}}},getMinPriceRange:function(){var range;for(var i in this.currentQuantityRanges)this.currentQuantityRanges.hasOwnProperty(i)&&(!range||parseInt(this.currentQuantityRanges[i].SORT_FROM)<parseInt(range.SORT_FROM))&&(range=this.currentQuantityRanges[i]);return range}})}(window);
//# sourceMappingURL=script.min.js.map